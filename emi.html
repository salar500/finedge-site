<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Paisa - EMI Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      font-family: system-ui, sans-serif;
      background-color: #f9fafb;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    main {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 6rem 1rem 4rem; /* space for fixed header */
    }

    .container {
      width: 100%;
      max-width: 650px;
      background: white;
      border-radius: 1rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      padding: 2rem;
    }

    input[type=range] {
      -webkit-appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 5px;
      outline: none;
      background: linear-gradient(to right, #10B981 0%, #10B981 0%, #e5e7eb 0%, #e5e7eb 100%);
      transition: background 0.2s ease;
    }

    input[type=range]:hover { opacity: 0.9; }

    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px; height: 20px;
      border-radius: 50%;
      background: #10B981;
      border: 2px solid white;
      cursor: pointer;
      box-shadow: 0 0 4px rgba(0,0,0,0.3);
    }
  </style>
</head>

<body>
  <!-- Header placeholder -->
  <div id="site-header"></div>

  <!-- Sidebar (same as index) -->
  <aside id="sidebar" class="fixed top-0 left-0 h-full w-64 bg-white shadow-lg z-50 p-4 transform -translate-x-full transition-transform duration-300">
    <h2 class="text-lg font-semibold text-emerald-600 mb-4">Calculators</h2>
    <ul class="space-y-3">
      <li><a href="index.html" class="block px-3 py-2 rounded hover:bg-emerald-50 text-gray-800">üè† Home</a></li>
      <li><a href="emi.html" class="block px-3 py-2 rounded bg-emerald-50 text-emerald-700 font-medium">üíµ EMI Calculator</a></li>
      <li><a href="sip.html" class="block px-3 py-2 rounded hover:bg-emerald-50 text-gray-800">üìà SIP Calculator</a></li>
      <li><a href="#" class="block px-3 py-2 rounded text-gray-400 cursor-not-allowed">üí∞ SWP Calculator (Coming Soon)</a></li>
    </ul>
    <button id="closeSidebar" class="mt-6 text-sm text-gray-500 hover:text-emerald-600">Close Menu</button>
  </aside>

  <!-- Overlay -->
  <div id="overlay" class="fixed inset-0 bg-black bg-opacity-40 hidden"></div>

  <!-- Main Content -->
  <main>
    <div class="container">
      <h2 class="text-xl font-semibold text-gray-800 mb-6 text-center">Mortgage / EMI Calculator</h2>

      <div class="space-y-6">
        <div>
          <label class="text-sm font-medium text-gray-700">Home Value (‚Çπ)</label>
          <input id="homeValue" type="number" value="500000" class="w-full mt-1 p-2 rounded bg-green-50 border border-gray-200" />
          <input id="homeValueSlider" type="range" min="50000" max="2000000" value="500000" step="10000" class="mt-3" />
        </div>

        <div>
          <label class="text-sm font-medium text-gray-700">Down Payment (‚Çπ)</label>
          <input id="downPayment" type="number" value="100000" class="w-full mt-1 p-2 rounded bg-green-50 border border-gray-200" />
          <input id="downPaymentSlider" type="range" min="0" max="2000000" value="100000" step="10000" class="mt-3" />
        </div>

        <div>
          <label class="text-sm font-medium text-gray-700">Interest Rate (%)</label>
          <input id="rate" type="number" value="7" step="0.1" class="w-full mt-1 p-2 rounded bg-green-50 border border-gray-200" />
          <input id="rateSlider" type="range" min="1" max="20" step="0.1" value="7" class="mt-3" />
        </div>

        <div>
          <label class="text-sm font-medium text-gray-700">Loan Term (Years)</label>
          <input id="years" type="number" value="20" class="w-full mt-1 p-2 rounded bg-green-50 border border-gray-200" />
          <input id="yearsSlider" type="range" min="1" max="40" step="1" value="20" class="mt-3" />
        </div>

        <div>
          <label class="text-sm font-medium text-gray-700">Loan Amount (‚Çπ)</label>
          <input id="loanAmount" type="number" readonly class="w-full mt-1 p-2 rounded bg-gray-100 border border-gray-200" />
        </div>
      </div>

      <div class="mt-8 text-center">
        <p id="monthlyPayment" class="text-lg font-semibold text-emerald-700"></p>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <div id="site-footer"></div>

  <script>
    // === Sidebar logic (same as index) ===
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const closeSidebar = document.getElementById('closeSidebar');

    function toggleSidebar(show) {
      sidebar.classList.toggle('-translate-x-full', !show);
      overlay.classList.toggle('hidden', !show);
    }

    document.addEventListener('click', (e) => {
      if (e.target.id === 'menuBtn') toggleSidebar(true);
      if (e.target.id === 'closeSidebar' || e.target.id === 'overlay') toggleSidebar(false);
    });

    // === Header & footer injection ===
    Promise.all([
      fetch('header.html').then(r => r.text()).then(html => document.getElementById('site-header').innerHTML = html),
      fetch('footer.html').then(r => r.text()).then(html => document.getElementById('site-footer').innerHTML = html)
    ]).catch(err => console.warn('Header/Footer load failed:', err));

    // === EMI logic ===
    function updateSlider(slider, input) {
      input.value = slider.value;
      slider.style.background = `linear-gradient(to right, #10B981 ${(slider.value - slider.min) / (slider.max - slider.min) * 100}%, #e5e7eb 0%)`;
      calculateEMI();
    }

    function calculateEMI() {
      const homeValue = parseFloat(document.getElementById('homeValue').value) || 0;
      const downPayment = parseFloat(document.getElementById('downPayment').value) || 0;
      const rate = parseFloat(document.getElementById('rate').value) / 100 / 12;
      const years = parseFloat(document.getElementById('years').value);
      const months = years * 12;
      const loanAmount = homeValue - downPayment;
      document.getElementById('loanAmount').value = loanAmount;

      const emi = (loanAmount * rate) / (1 - Math.pow(1 + rate, -months));
      document.getElementById('monthlyPayment').textContent = `Estimated Monthly EMI: ‚Çπ${emi.toFixed(2)}`;
    }

    // Sync inputs & sliders
    ['homeValue', 'downPayment', 'rate', 'years'].forEach(id => {
      const input = document.getElementById(id);
      const slider = document.getElementById(id + 'Slider');
      input.addEventListener('input', () => { slider.value = input.value; calculateEMI(); });
      slider.addEventListener('input', () => updateSlider(slider, input));
    });

    calculateEMI();
  </script>
</body>
            </html>
