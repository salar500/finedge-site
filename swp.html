<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="CZWFvstezJT5ofn8xA3X8Simwx6coUHr0ASrM64ZvPA" />
  <title>SWP Calculator â€“ Paisa</title>
  <!-- âœ… SEO & Social Meta Tags -->
  <meta name="description" content="Paisa - Free EMI, SIP, SWP, Home Loan & Income Tax Calculators. Simple, fast, and accurate tools to plan your financial journey.">
  <meta name="keywords" content="Paisa, EMI Calculator, SIP Calculator, SWP Calculator, Home Loan Calculator, Income Tax Calculator, Finance Tools, Personal Finance, Investment Planner, Loan EMI, Financial Planning">
  <meta name="author" content="Paisa Team">
  <meta name="robots" content="index, follow">

  <!-- âœ… Open Graph (for social media previews) -->
  <meta property="og:title" content="Paisa â€“ Smart Financial Calculators">
  <meta property="og:description" content="Free EMI, SIP, SWP, Home Loan & Income Tax Calculators. Simplify your financial planning with Paisa.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://salar500.github.io/finedge-site/">
  <meta property="og:image" content="https://salar500.github.io/finedge-site/assets/preview.png">

  <!-- âœ… Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Paisa â€“ Smart Financial Calculators">
  <meta name="twitter:description" content="Plan better with free calculators for EMI, SIP, SWP, Home Loans & Income Tax.">
  <meta name="twitter:image" content="https://salar500.github.io/finedge-site/assets/preview.png">

  <!-- âœ… Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <!-- âœ… Optional: Theme color for browsers -->
  <meta name="theme-color" content="#10B981">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #f9fafb;
      color: #1f2937;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      margin: 0;
    }

    /* Range styling */
    input[type=range] {
      -webkit-appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 5px;
      outline: none;
      background: linear-gradient(to right, #10B981 0%, #10B981 0%, #e5e7eb 0%, #e5e7eb 100%);
      transition: background 0.2s ease;
    }
    input[type=range]:hover { opacity: 0.9; }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #10B981;
      border: 2px solid white;
      cursor: pointer;
      box-shadow: 0 0 4px rgba(0,0,0,0.3);
    }

    .pie-wrapper {
      position: relative;
      width: 220px;
      height: 220px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .pie-wrapper svg {
      width: 100%;
      height: 100%;
      overflow: visible;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <div id="site-header"></div>

  <!-- Sidebar -->
  <div id="site-sidebar"></div>

  <!-- Overlay -->
  <div id="overlay" class="fixed inset-0 bg-black bg-opacity-40 hidden z-40"></div>

  <!-- Main Content -->
  <main class="flex-grow max-w-2xl mx-auto bg-white rounded-xl shadow p-6 mt-20 mb-10">
    <h1 class="text-2xl font-bold text-emerald-600 mb-6 text-center">ðŸ’° SWP Calculator</h1>

    <div class="space-y-6">
      <div>
        <label class="text-sm font-medium text-gray-700">Initial Investment (â‚¹)</label>
        <input id="investment" type="number" min="10000" value="500000"
          class="block w-full bg-green-50 rounded px-3 py-2 mt-1 outline-none font-semibold text-gray-800">
        <input id="investmentSlider" type="range" min="10000" max="10000000" step="10000" value="500000" class="mt-3 slider">
      </div>

      <div>
        <label class="text-sm font-medium text-gray-700">Withdrawal Amount (â‚¹/month)</label>
        <input id="withdrawal" type="number" min="1000" value="10000"
          class="block w-full bg-green-50 rounded px-3 py-2 mt-1 outline-none font-semibold text-gray-800">
        <input id="withdrawalSlider" type="range" min="1000" max="100000" step="500" value="10000" class="mt-3 slider">
      </div>

      <div>
        <label class="text-sm font-medium text-gray-700">Expected Annual Return (%)</label>
        <input id="rate" type="number" min="0" max="20" step="0.1" value="8"
          class="block w-full bg-green-50 rounded px-3 py-2 mt-1 outline-none font-semibold text-gray-800">
        <input id="rateSlider" type="range" min="0" max="20" step="0.1" value="8" class="mt-3 slider">
      </div>

      <div>
        <label class="text-sm font-medium text-gray-700">Investment Duration (years)</label>
        <input id="years" type="number" min="1" max="50" step="1" value="10"
          class="block w-full bg-green-50 rounded px-3 py-2 mt-1 outline-none font-semibold text-gray-800">
        <input id="yearsSlider" type="range" min="1" max="50" step="1" value="10" class="mt-3 slider">
      </div>
    </div>

    <div class="mt-10 text-center">
      <h3 class="text-lg font-semibold text-gray-700 mb-4">SWP Summary</h3>
      <div class="flex flex-col items-center justify-center pie-wrapper">
        <svg id="pieChart" viewBox="0 0 36 36" class="transform -rotate-90">
          <circle cx="18" cy="18" r="15.915" fill="none" stroke="#E5E7EB" stroke-width="6"></circle>
          <circle id="totalArc" cx="18" cy="18" r="15.915" fill="none" stroke="#A7F3D0" stroke-width="6" stroke-dasharray="0 100" stroke-linecap="round"></circle>
          <circle id="gainArc" cx="18" cy="18" r="15.915" fill="none" stroke="#047857" stroke-width="6" stroke-dasharray="0 100" stroke-linecap="round"></circle>
        </svg>
      </div>

      <div class="mt-4 text-sm text-gray-700">
        <p><span class="inline-block w-3 h-3 bg-emerald-200 rounded-full mr-2"></span> Total Withdrawn: <span id="withdrawText">â‚¹0</span></p>
        <p><span class="inline-block w-3 h-3 bg-emerald-700 rounded-full mr-2"></span> Final Value: <span id="gainText">â‚¹0</span></p>
      </div>
      <p class="font-semibold text-gray-900 text-lg mt-4">Balance at End: <span id="finalValue">â‚¹0</span></p>
    </div>
  </main>

  <!-- Footer -->
  <div id="site-footer"></div>

  <script>
    // Format INR values
    const formatINR = v => new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR', maximumFractionDigits: 0 }).format(v);

    // Update slider fill
    function updateSliderFill(slider) {
      const min = slider.min || 0, max = slider.max || 100, val = slider.value;
      const pct = ((val - min) * 100) / (max - min);
      slider.style.background = `linear-gradient(to right, #10B981 0%, #10B981 ${pct}%, #e5e7eb ${pct}%, #e5e7eb 100%)`;
    }

    function calculateSWP() {
      const P = parseFloat(document.getElementById('investment').value) || 0;
      const withdrawal = parseFloat(document.getElementById('withdrawal').value) || 0;
      const r = (parseFloat(document.getElementById('rate').value) / 12 / 100) || 0;
      const years = parseFloat(document.getElementById('years').value) || 0;
      const n = years * 12;

      let totalWithdrawn = withdrawal * n;
      let balance = P;

      for (let i = 0; i < n; i++) {
        balance = (balance - withdrawal) * (1 + r);
        if (balance < 0) { balance = 0; break; }
      }

      let gain = balance > 0 ? balance - P + totalWithdrawn : 0;

      document.getElementById('withdrawText').innerText = formatINR(totalWithdrawn);
      document.getElementById('gainText').innerText = formatINR(gain);
      document.getElementById('finalValue').innerText = formatINR(balance);

      const total = totalWithdrawn + gain;
      const wPct = (totalWithdrawn / total) * 100;
      const gPct = (gain / total) * 100;

      document.getElementById('totalArc').setAttribute('stroke-dasharray', `${wPct} ${100 - wPct}`);
      document.getElementById('gainArc').setAttribute('stroke-dasharray', `${gPct} ${100 - gPct}`);
      document.getElementById('gainArc').setAttribute('stroke-dashoffset', -wPct);
    }

    // Sync sliders & inputs
    ['investment', 'withdrawal', 'rate', 'years'].forEach(id => {
      const input = document.getElementById(id);
      const slider = document.getElementById(id + 'Slider');
      const update = () => { slider.value = input.value; updateSliderFill(slider); calculateSWP(); };
      input.addEventListener('input', update);
      slider.addEventListener('input', () => { input.value = slider.value; updateSliderFill(slider); calculateSWP(); });
      updateSliderFill(slider);
    });

    calculateSWP();

    // Load header, sidebar, and footer
    Promise.all([
      fetch("header.html").then(r => r.text()).then(h => document.getElementById("site-header").innerHTML = h),
      fetch("sidebar.html").then(r => r.text()).then(h => document.getElementById("site-sidebar").innerHTML = h),
      fetch("footer.html").then(r => r.text()).then(h => document.getElementById("site-footer").innerHTML = h)
    ]).then(() => {
      // Reattach menu toggle logic after loading
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      const menuBtn = document.getElementById("menuBtn");
      const closeSidebar = document.getElementById("closeSidebar");

      function openSidebar() {
        sidebar.classList.remove("-translate-x-full");
        overlay.classList.remove("hidden");
      }
      function closeSidebarFunc() {
        sidebar.classList.add("-translate-x-full");
        overlay.classList.add("hidden");
      }

      menuBtn?.addEventListener("click", openSidebar);
      closeSidebar?.addEventListener("click", closeSidebarFunc);
      overlay?.addEventListener("click", closeSidebarFunc);
    }).catch(err => console.warn("Header/Sidebar/Footer load failed", err));
  </script>
</body>
</html>
